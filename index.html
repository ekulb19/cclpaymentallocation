<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Allocation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            max-width: 600px;
            width: 100%;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 8px;
            color: #1f2937;
        }
        .subtitle {
            text-align: center;
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 32px;
        }
        .summary-card {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 32px;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
            font-size: 14px;
        }
        .summary-row:last-child {
            border-bottom: none;
        }
        .summary-label {
            color: #6b7280;
            font-weight: 500;
        }
        .summary-value {
            color: #1f2937;
            font-weight: 600;
            font-size: 16px;
        }
        .allocation-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 32px;
        }
        .allocation-card {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s;
        }
        .allocation-card:hover {
            border-color: #d1d5db;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .card-title {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 16px;
            font-size: 15px;
        }
        .card-stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }
        .stat {
            background: #f9fafb;
            padding: 12px;
            border-radius: 6px;
            font-size: 13px;
        }
        .stat-label {
            color: #6b7280;
            font-size: 11px;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        .stat-value {
            color: #1f2937;
            font-weight: 600;
            font-size: 14px;
        }
        .stat-value.allocated {
            color: #2563eb;
        }
        .input-group {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }
        .input-wrapper {
            flex: 1;
        }
        .input-label {
            font-size: 12px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 6px;
            display: block;
        }
        input[type="number"] {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        .btn-small {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        .btn-clear {
            background: #f3f4f6;
            color: #6b7280;
        }
        .btn-clear:hover {
            background: #e5e7eb;
        }
        .escrow-note {
            font-size: 12px;
            color: #6b7280;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e5e7eb;
        }
        .payment-summary {
            background: #f0f9ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }
        .payment-summary-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            padding: 6px 0;
        }
        .payment-summary-row.total {
            font-weight: 600;
            border-top: 1px solid #bfdbfe;
            padding-top: 8px;
            margin-top: 8px;
        }
        .payment-summary-label {
            color: #1e40af;
        }
        .payment-summary-value {
            color: #1e40af;
            font-weight: 600;
        }
        .remaining {
            color: #dc2626;
        }
        .remaining.balanced {
            color: #16a34a;
        }
        .btn-group {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 32px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        .btn-primary:hover:not(:disabled) {
            background: #1d4ed8;
        }
        .btn-primary:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }
        .btn-secondary:hover {
            background: #d1d5db;
        }
        .status-message {
            text-align: center;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }
        .status-message.show {
            display: block;
        }
        .status-message.success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #86efac;
        }
        .status-message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Allocate Your $10,000 Payment</h1>
        <p class="subtitle">Review your current loan balances and decide where to apply your payment</p>

        <!-- Current Payment Summary -->
        <div class="summary-card">
            <div class="summary-row">
                <span class="summary-label">Payment Amount</span>
                <span class="summary-value">$10,000.00</span>
            </div>
            <div class="summary-row">
                <span class="summary-label">Remaining to Allocate</span>
                <span class="summary-value" id="totalRemaining">$10,000.00</span>
            </div>
        </div>

        <!-- Status Message -->
        <div class="status-message" id="statusMessage"></div>

        <!-- Allocation Cards -->
        <div class="allocation-grid">

            <!-- Next Payment -->
            <div class="allocation-card">
                <div class="card-title">Next Payment</div>
                <div class="card-stats">
                    <div class="stat">
                        <div class="stat-label">Payment Amount</div>
                        <div class="stat-value">$2,500.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Allocated</div>
                        <div class="stat-value allocated" id="nextPaymentAllocated">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="nextPaymentAvailable">$10,000.00</div>
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label class="input-label">Number of Payments</label>
                        <input type="number" class="allocation-input" data-key="nextPayment" data-increment="2500" placeholder="0" min="0" step="1">
                    </div>
                    <button class="btn-small btn-clear" data-key="nextPayment">Clear</button>
                </div>
                <div class="escrow-note">
                    Each payment = $2,500
                </div>
            </div>

            <!-- Principal -->
            <div class="allocation-card">
                <div class="card-title">Principal</div>
                <div class="card-stats">
                    <div class="stat">
                        <div class="stat-label">Current Balance</div>
                        <div class="stat-value">$30,000.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Allocated</div>
                        <div class="stat-value allocated" id="principalAllocated">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="principalAvailable">$10,000.00</div>
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label class="input-label">Amount to Apply</label>
                        <input type="number" class="allocation-input" data-key="principal" placeholder="0.00" min="0" step="0.01">
                    </div>
                    <button class="btn-small btn-clear" data-key="principal">Clear</button>
                </div>
            </div>

            <!-- Payoff -->
            <div class="allocation-card">
                <div class="card-title">Payoff</div>
                <div class="card-stats">
                    <div class="stat">
                        <div class="stat-label">Current Balance</div>
                        <div class="stat-value">$30,100.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Allocated</div>
                        <div class="stat-value allocated" id="payoffAllocated">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="payoffAvailable">$10,000.00</div>
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label class="input-label">Amount to Apply</label>
                        <input type="number" class="allocation-input" data-key="payoff" placeholder="0.00" min="0" step="0.01">
                    </div>
                    <button class="btn-small btn-clear" data-key="payoff">Clear</button>
                </div>
            </div>

            <!-- Late Fees -->
            <div class="allocation-card">
                <div class="card-title">Late Fees</div>
                <div class="card-stats">
                    <div class="stat">
                        <div class="stat-label">Current Balance</div>
                        <div class="stat-value">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Allocated</div>
                        <div class="stat-value allocated" id="lateFeesAllocated">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="lateFeesAvailable">$10,000.00</div>
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label class="input-label">Amount to Apply</label>
                        <input type="number" class="allocation-input" data-key="lateFees" placeholder="0.00" min="0" step="0.01">
                    </div>
                    <button class="btn-small btn-clear" data-key="lateFees">Clear</button>
                </div>
            </div>

            <!-- Service Fees -->
            <div class="allocation-card">
                <div class="card-title">Service Fees</div>
                <div class="card-stats">
                    <div class="stat">
                        <div class="stat-label">Current Balance</div>
                        <div class="stat-value">$75.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Allocated</div>
                        <div class="stat-value allocated" id="serviceFeesAllocated">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="serviceFeesAvailable">$10,000.00</div>
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label class="input-label">Amount to Apply</label>
                        <input type="number" class="allocation-input" data-key="serviceFees" placeholder="0.00" min="0" step="0.01">
                    </div>
                    <button class="btn-small btn-clear" data-key="serviceFees">Clear</button>
                </div>
            </div>

            <!-- Escrow -->
            <div class="allocation-card">
                <div class="card-title">Escrow</div>
                <div class="card-stats">
                    <div class="stat">
                        <div class="stat-label">Current Balance</div>
                        <div class="stat-value">$1,500.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Allocated</div>
                        <div class="stat-value allocated" id="escrowAllocated">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Available</div>
                        <div class="stat-value" id="escrowAvailable">$10,000.00</div>
                    </div>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label class="input-label">Prepay Months</label>
                        <input type="number" class="allocation-input" data-key="escrow" data-monthly="50" placeholder="0" min="0" step="1">
                    </div>
                    <button class="btn-small btn-clear" data-key="escrow">Clear</button>
                </div>
                <div class="escrow-note">
                    At $50/month, each month = $50 prepayment
                </div>
            </div>

        </div>

        <!-- Allocation Summary -->
        <div class="payment-summary">
            <div class="payment-summary-row">
                <span class="payment-summary-label">Total Payment:</span>
                <span class="payment-summary-value">$10,000.00</span>
            </div>
            <div class="payment-summary-row">
                <span class="payment-summary-label">Total Allocated:</span>
                <span class="payment-summary-value" id="summaryAllocated">$0.00</span>
            </div>
            <div class="payment-summary-row total">
                <span class="payment-summary-label">Remaining:</span>
                <span class="payment-summary-value remaining" id="summaryRemaining">$10,000.00</span>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="btn-group">
            <button class="btn-secondary">Cancel</button>
            <button class="btn-primary" id="submitBtn" disabled>Submit Allocation</button>
        </div>

        <!-- Bottom Status Message -->
        <div class="status-message" id="statusMessageBottom" style="margin-top: 24px;"></div>
    </div>

    <script>
        const PAYMENT_AMOUNT = 10000;
        const ESCROW_MONTHLY = 50;

        const data = {
            nextPayment: 0,
            principal: 0,
            payoff: 0,
            lateFees: 0,
            serviceFees: 0,
            escrow: 0
        };

        function formatMoney(num) {
            return '$' + parseFloat(num).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        function getEscrowAmount(months) {
            return months * ESCROW_MONTHLY;
        }

        function getTotalAllocated() {
            return Object.values(data).reduce((sum, val) => sum + val, 0);
        }

        function getRemaining() {
            return PAYMENT_AMOUNT - getTotalAllocated();
        }

        function updateAllAllocations() {
            const total = getTotalAllocated();
            const remaining = getRemaining();

            // Update each card's stats
            for (const key in data) {
                document.getElementById(key + 'Allocated').textContent = formatMoney(data[key]);
                document.getElementById(key + 'Available').textContent = formatMoney(remaining);
            }

            // Update summary
            document.getElementById('totalRemaining').textContent = formatMoney(remaining);
            document.getElementById('summaryAllocated').textContent = formatMoney(total);
            document.getElementById('summaryRemaining').textContent = formatMoney(remaining);

            // Update remaining color
            const remainingEl = document.getElementById('summaryRemaining');
            remainingEl.classList.remove('balanced');
            if (Math.abs(remaining) < 0.01) {
                remainingEl.classList.add('balanced');
            }

            // Enable/disable submit button
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = Math.abs(remaining) > 0.01;

            // Show status message
            const statusEl = document.getElementById('statusMessage');
            if (Math.abs(remaining) < 0.01) {
                statusEl.className = 'status-message show success';
                statusEl.textContent = '✓ All funds allocated correctly!';
            } else if (total > 0) {
                statusEl.className = 'status-message show error';
                statusEl.textContent = `You must allocate exactly $10,000. ${formatMoney(remaining)} remaining.`;
            } else {
                statusEl.className = 'status-message';
            }
        }

        // Handle allocation inputs
        document.querySelectorAll('.allocation-input').forEach(input => {
            input.addEventListener('input', function() {
                const key = this.getAttribute('data-key');
                
                if (key === 'nextPayment') {
                    // For next payment, input is number of payments
                    const payments = parseInt(this.value) || 0;
                    data[key] = payments * 2500;
                } else if (key === 'escrow') {
                    // For escrow, input is number of months
                    const months = parseInt(this.value) || 0;
                    data[key] = getEscrowAmount(months);
                } else {
                    // For others, input is dollar amount
                    const amount = parseFloat(this.value) || 0;
                    data[key] = Math.max(0, amount);
                }
                
                updateAllAllocations();
            });
        });

        // Handle clear buttons
        document.querySelectorAll('.btn-clear').forEach(btn => {
            btn.addEventListener('click', function() {
                const key = this.getAttribute('data-key');
                data[key] = 0;
                document.querySelector(`input[data-key="${key}"]`).value = '';
                updateAllAllocations();
            });
        });

        // Handle submit
        document.getElementById('submitBtn').addEventListener('click', function() {
            const statusEl = document.getElementById('statusMessage');
            const statusElBottom = document.getElementById('statusMessageBottom');
            const message = '✓ Payment allocation successfully applied!';
            
            statusEl.className = 'status-message show success';
            statusEl.textContent = message;
            
            statusElBottom.className = 'status-message show success';
            statusElBottom.textContent = message;
            
            // Disable the submit button and show details
            this.disabled = true;
            this.textContent = 'Allocation Submitted';
        });

        // Handle cancel
        document.querySelector('.btn-secondary').addEventListener('click', function() {
            if (confirm('Cancel this allocation?')) {
                location.reload();
            }
        });

        // Initial update
        updateAllAllocations();
    </script>
</body>
</html>
